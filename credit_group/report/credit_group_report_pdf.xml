<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <template id="credit_group_report">
        <t t-call="web.html_container">
            <t t-foreach="docs" t-as="doc">
                <t t-call="web.internal_layout">
                    <style>
                        h1{
                            text-align:center;
                        }
                        th{
                            text-align: center;                                          
                        }
                    </style>
                    <div class="page">
                        <header>
                            <h1>
                                <span t-field="doc.name"/>
                            </h1>

                            <span t-field="doc.code"/>
                            <span t-field="doc.sale_channel_id.name"/>
                        </header>
                        <h2>Credit Group Members</h2>
                        <table class="table table-sm">
                            <thead>
                                <tr>
                                    <th>Partner</th>
                                    <th>Doc. Number</th>
                                    <th>Phone</th>
                                    <th>E-Mail</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr t-foreach="doc.partner_ids" t-as="partner">
                                    <td>
                                        <span t-field="partner.name"/>
                                    </td>
                                    <td>
                                        <span t-field="partner.vat"/>
                                    </td>
                                    <td>
                                        <span t-field="partner.phone"/>
                                    </td>
                                    <td>
                                        <span t-field="partner.email"/>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                        <h2>Sale Orders</h2>
                        <table class="table table-sm">
                            <thead>
                                <tr>
                                    <th>Order</th>
                                    <th>Date</th>
                                    <th>Amount Total</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr t-foreach="doc._get_computable_credit_lines()[0]" t-as="sale_order">
                                    <td>
                                        <span t-field="sale_order.name"/>
                                    </td>
                                    <td>
                                        <span t-field="sale_order.date_order"/>
                                    </td>
                                    <td>
                                        <span t-field="sale_order.amount_company_currency" t-options="{'widget': 'monetary', 'display_currency': doc.company_id.currency_id}"/>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                        <h2>Invoices</h2>
                        <table class="table table-sm">
                            <thead>
                                <tr>
                                    <th>Order</th>
                                    <th>Date</th>
                                    <th>Amount Total</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr t-foreach="doc._get_computable_credit_lines()[1]" t-as="invoice">
                                    <td>
                                        <span t-field="invoice.name"/>
                                    </td>
                                    <td>
                                        <span t-field="invoice.invoice_date"/>
                                    </td>
                                    <td>
                                        <span t-field="invoice.amount_residual" t-options="{'widget': 'monetary', 'display_currency': doc.company_id.currency_id}"/>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </t>
            </t>
        </t>
    </template>
</odoo>